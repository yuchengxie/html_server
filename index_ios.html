<!DOCTYPE html>

<head>
  <title>test ios</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>

<!--   CSS语法-->
<style type='text/css'>
  img {
    cursor: pointer;
  }
</style>

<body>


  <p> <a href="http://www.baidu.com">百度</a> </p>

  <p> <button id="btn1" type="button" onclick="jsToOcFunction1()"> JS调用OC：不带参数 </button> </p>

  <p> <button id="btn2" type="button" onclick="jsToOcFunction2()"> JS调用OC：带参数 </button> </p>

  <p> <button id="btn3" type="button" onclick="showAlert()"> oc捕获到html的弹出框 </button> </p>

  <br><br>

  <p> <button id="btn4" type="button" onclick="startBLE()">开启蓝牙功能</button> </p>
  <p id="temp" style="font-size: 30px;color: chocolate;">温度...</p>

  <p onclick="getTemp()">点击单次获取温度</p>

  <p> <button id="btn4" type="button" onclick="closeBLE()">断开连接</button> </p>

  <p id="state">状态显示</p>

  <!--        JS语法-->
  <script type="text/javascript">

    var tempEle = document.getElementById("temp");
    var state = document.getElementById("state");
    // alert(tempEle);
    function onNotifyTemp(temp) {
      // alert('1');
      // tempEle.innerHTML = 'hello';
      tempEle.innerHTML = temp;
    }

    function onNotifyState(_state) {
      state.innerHTML = _state;
    }

    //开启蓝牙功能
    function startBLE() {
      window.webkit.messageHandlers.startBLE.postMessage({});
    }

    //关闭蓝牙
    function closeBLE() {
      window.webkit.messageHandlers.closeBLE.postMessage({});
    }


    function jsToOcFunction1() {
      window.webkit.messageHandlers.jsToOcNoPrams.postMessage({});
    }

    function jsToOcFunction2() {
      window.webkit.messageHandlers.jsToOcWithPrams.postMessage({ "params": "我是参数" });
    }

    function showAlert() {
      alert("html页面alert");
    }

    //图片点击事件
    function clickImage() {
      alert("欢迎你关注我！点击了图片");
    }

    //OC调用JS改变背景色
    function changeColor(parameter) {
      document.body.style.backgroundColor = randomColor();
      alert(parameter);
    }

    function onNotify(str) {
      alert(str);
    }


    //随机生成颜色
    function randomColor() {
      var r = Math.floor(Math.random() * 256);
      var g = Math.floor(Math.random() * 256);
      var b = Math.floor(Math.random() * 256);
      return "rgb(" + r + ',' + g + ',' + b + ")";//所有方法的拼接都可以用ES6新特性`其他字符串{$变量名}`替换
    }

    // 切换图片
    function changePicture(id, path) {
      var image = document.getElementById(id);
      image.src = path;
    }

  </script>

</body>

</html>